2.0.0

AMIS 2.0.0

2022-06-30

重大变更 Breaking Changes🔥

amis 从 2.0.0 起拆分为 Monorepo，分为以下 4 个 package：

amis: 渲染器组件

amis-ui：amis React 组件，可以单独作为 UI 库使用，包含国际化语料文件和主题样式文件

amis-core: amis 底层渲染逻辑及相关 utils 函数，如果你想自己实现渲染器，依赖这个就够了

amis-formula: 负责 amis 里面的表达式、公式及模板的实现

从 v1 到 v2

仅使用 amis React 组件的用户现在可以直接使用 amis-ui。

amis 会将 amis-core 和 amis-ui 中的内容导出，比如 import {ToastComponent} from 'amis';。

v1 版本从 amis/lib/\*\*路径下引用的文件需要注意路径更新。

scss/\_utilities.scss 默认不再包含，如需里面的帮助类样式，请引入 amis-ui/lib/helper.css

InputRichText, Editor, InputExcel 等依赖第三方库的组件现在支持按需引入了，如果你通过 sdk 的方式使用 amis，在使用对应组件时需要将 sdk.tar.gz 中对应的依赖包引入，举例：

// 如果你使用 tinymce 富文本编辑器

import 'amis/sdk/rest';

import 'amis/sdk/tinymce';

新功能 Features✨

feat: App 多页应用支持面包屑开关 (#4722) @qianxiaofendou

feat: Switch 支持不同尺寸 (#4682) @lurunze1226

feat: input-tree 支持 label 高亮文字 (#4675) @chengjinyang0

feat: 国际化表单 label 适配 (#4674) @VitoBeijing

feat: Form 表单 label 国际化适配 (#4669) @VitoBeijing

feat: 表单项增加参照录入 (#4618) @pcdqc

feat: checkboxed 支持 menuTpl (#4642) @lurunze1226

feat: InputTag 支持 max，maxTagLength，separator (#4637) @lurunze1226

feat: JSON 展示支持设置最大展示长度; fix: Debug 面板无法横向滚动 (#4632) @lurunze1226

feat: Form，FormItem 支持自定 label 宽度 (#4630) @lurunze1226

feat: crud2 + Condition-builder 增加弹窗模式 + Icon 配置直接拿到注册 icon (#4604) @yangwei9012

feat：多行文本框支持 change 事件 (#4598) @pianruijie

问题修复 Bugfix 🐛

fix: 修复 input-password 在 antd 下不显示问题 (#4742) @nwind

fix：timeLine 展示问题修复 (#4746) @qiaogg

fix:curd loading 显示问题 (#4733) @hsm-lv

fix: InputTag 组件批量添加错误生效问题 (#4734) @lurunze1226

fix: inputRange 保证下标输入值在范围内 (#4732) @kano233333

fix: 修复 cards 报错, Card 中没有 onSelect 事件,所以不需要下发对应逻辑 (#4731) @2betop

fix: 修复 inputFile inputImage 首次表单提交数据没有携带的问题 (#4730) @2betop

fix: Wizard 组件点击下一步会多提交一次问题 (#4729) @lurunze1226

fix: Wizard 组件点击下一步会多提交一次问题 (#4728) @lurunze1226

fix: 修复 flex 布局传递给 flexItem 的 disabled 属性 bug 问题 (#4715) @jiatianqi

fix: tooltipWrapper 容器挂载问题 (#4719) @qianxiaofendou

fix: ts 声明 (#4724) @allenve

fix: 上传文件不能回显问题 (#4714) @igrowp

fix: 事件动作修复文件下载问题 (#4705) @igrowp

fix: Table 无法处理动作未交给上层处理 (#4710) @lurunze1226

fix(amis-ui): 完善 package exports (#4706) @wibetter

fix: 修复 pagination-wrapper perPage 设置无效问题 (#4701) @2betop

fix: 如果先 updateEnv 会让 env 默认配置丢失 (#4699) @2betop

fix: crud 动态列问题修复 (#4694) @wanglinfang2014

fix: 文件上传自动填充问题修复 (#4688) @igrowp

fix: 自定义列显示问题修复 (#4680) @wanglinfang2014

fix: 解决上传文件组件自动填充值为空的情况 (#4678) @igrowp

fix: 解决按钮组针对统一按钮主题 btnLevel & disabled 属性设置不生效的问题 (#4660) @jiatianqi

fix: 修复数据映射复杂写法没有正确返回原始数据的问题 (#4626) @2betop

fix: 修复 crud 默认不展示过滤条件初始请求没有发送的问题 (#4658) @2betop

fix: crud 表格筛选 & 数据域数组数据获取 & 列表渲染方法抽象方便编辑器重写 & 公式编辑器变量高亮内容包括${} (#4668) @yangwei9012

fix: Radios 组件 labelClassName => optionClassName，避免冲突 (#4665) @lurunze1226

fix：公式值特殊字符高亮处理 (#4631) @allenve

test: inputRange 事件动作单测 (#4639) @kano233333

fix: inputRange 下标百分比支持小数 & 参数类型修改 (#4633) @kano233333

fix: autoFill 在选项有联动配置时会出现重复触发 (#4614) @2betop

fix: 修复 textarea 不能输入中文的问题 (#4613) @2betop

fix(collapse-group): 修复 collapse 不能折叠的问题 (#4609) @wibetter

fix(collapse-group): 修正 activeKey 未更新问题 (#4606) @wibetter

fix: 修复 steps 组件远程拉取报 findIndex is not a function 的问题 (#4603) @2betop

fix: input file (#4696) @igrowp

fix: image upload (#4695) @igrowp

fix: 图片上传自动填充逻辑调整 (#4692) @igrowp

fix: table2 问题修复 (#4652) @wanglinfang2014

fix: comb repeat remote verification (#4622) @CheshireJCat

样式调整 Styles 🌈

styles：修复 table 组件列宽拖拽时，光标位置不准问题 (#4752) @qinhaoyan

styles：修复 antd 主题 tree 组件变量缺失 (#4736) @qinhaoyan

style: 优化 select 下面 checkbox 样式 (#4723) @2betop

styles：优化日期范围选择器和下拉框多选模式样式 (#4712) @qinhaoyan

文档更新 Docs

doc: 文档中错误的引入路径更新 (#4751) @lurunze1226

doc: 添加 combo setValue 事件动作示例 (#4717) @2betop

doc: 更正 crud 文档错误 (#4700) @2betop

doc：完善 inputText 事件表 (#4657) @weijian1

doc: 补充完善 inputTable 按钮触发新增行文档 (#4662) @weijian1

doc: 修复样式文档下搜索栏无法输入问题 (#4648) @lurunze1226

doc: 修复相对值的跳转链接 (#4611) @TeCHiScy

doc: 修复文档中示例 code 多余空格导致的报错 (#4601) @iceqing

doc: Update image.md (#4698) @SmallRuralDog

日常维护 Chore

chore: 调整 esm 模块导出 (#4635) @2betop

chore: 导出 excel 多做一些类型判断兼容 (#4659) @2betop

chore: 减小 input 输入框初始大小避免 tree-select 在 size: md 下容易折行 (#4587) (#4588) @nwind

chore: vscode 忽略临时文件避免卡顿 (#4607) @nwind

chore: 更新 QRCode 单元测试 (#4713) @lurunze1226

cherry-pick: Action 中 Required 属性和 Form 校验合并 #4689 #4677 (#4697) @lurunze1226

cherry-pick: Select 组件开启虚拟列表后显示问题#4548 #4516 (#4572) @lurunze1226
